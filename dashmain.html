<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Rural Lady Empowerment Dashboard</title>
        <link rel="stylesheet" href="/css/style.css">
    </head>
    <body>
        <div class="sidebar">
            <div class="sidebar-logo">
                <div class="logo">RE</div>
                <div class="logo-text">RuralEmpowerment</div>
            </div>
            <ul class="sidebar-menu">
                <li><a href="#"
                        onclick="loadPage('dashboard.html')"><i>ğŸ“Š</i>
                        <span>Dashboard</span></a></li>
                <li><a href="#" onclick="loadPage('learning.html')"><i>ğŸ‘©â€ğŸ“</i>
                        <span>Learning</span></a></li>
                <li><a href="#" onclick="loadPage('skills.html')"><i>ğŸ“</i>
                        <span>Skills</span></a></li>
                <li><a href="#" onclick="loadPage('resources.html')"><i>ğŸ“</i>
                        <span>Resources</span></a></li>
                <li><a href="#" onclick="loadPage('community.html')"><i>ğŸ‘¥</i>
                        <span>Community</span></a></li>
                <li><a href="#" onclick="loadPage('store.html')"><i>ğŸ†</i>
                        <span>Store</span></a></li>
                <li><a href="#" onclick="loadPage('settings.html')"><i>âš™ï¸</i>
                        <span>Settings</span></a></li>

            </ul>
            <div class="sidebar-footer">
                <a href="#" class="btn btn-secondary"
                    onclick="logout()">Logout</a>
            </div>
        </div>

        <div class="main-content">

            <!-- Loading Indicator (hidden by default) -->
            <div id="loading"
                class="absolute inset-0 flex items-center justify-center bg-white z-10 hidden">
            </div>

            <!-- The iframe that shows different sections -->
            <iframe id="contentFrame" src=""
                frameborder="0" style="width: 100%; height: 100%;"></iframe>
            
        </div>

        <script>
        // Update the profile photo and name in the dashboard
        document.addEventListener("DOMContentLoaded", () => {
            const profileName = localStorage.getItem("userName") || "Guest";
            const profilePhoto = localStorage.getItem("profilePhoto") || "default-avatar.png";

            document.getElementById("dashboardProfileName").textContent = profileName;
            document.getElementById("dashboardProfilePhoto").src = profilePhoto;
        });

        // Add event listener for logout
        function logout() {
            // Clear local storage and redirect to login
            localStorage.clear();
            window.location.href = "index.html";
        }
        window.addEventListener('DOMContentLoaded', () => {
    const storedPhoto = localStorage.getItem('profilePhoto');
    const storedName = localStorage.getItem('profileName');

    if (storedPhoto) {
      const img = document.getElementById('dashboardProfilePhoto');
      if (img) img.src = storedPhoto;
    }

    if (storedName) {
      const nameSpan = document.getElementById('dashboardProfileName');
      if (nameSpan) nameSpan.textContent = storedName;
    }
  });

  function loadPage(pageUrl) {
        const iframe = document.getElementById('contentFrame');
        const loading = document.getElementById('loading');

        // Show loading
        loading.classList.remove('hidden');

        // Optional: Clear previous iframe visually (black issue workaround)
        iframe.style.opacity = "0";

        // Change src to the new page
        iframe.src = pageUrl;

        // Wait for iframe to load, then hide loading and show content
        iframe.onload = () => {
            loading.classList.add('hidden');
            iframe.style.opacity = "1";
        };
    }

    </script>
    </body>
</html>
